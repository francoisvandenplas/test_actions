
name : Tests

on:
  workflow_dispatch:
  
jobs:
  build_array_job:
    runs-on: ubuntu-latest
    outputs:
      result: ${{ toJSON(steps.build_array.outputs.array) }}
    steps:
      - uses: actions/checkout@v2
      - id: build_array
        shell:
        run: |-
          git show --name-only --oneline
          array=( $(git show --name-only --oneline | grep folder |cut -d/ -f1 | uniq) )
          echo $array
          echo "array=$array" >> "$GITHUB_OUTPUT"

  matrix_job:
    runs-on: ubuntu-latest
    needs: build_array_job
    steps:
      - env:
          RESULT: ${{ fromJSON(needs.build_array_job.outputs.result) }}
        run: echo "$RESULT"




